$("ul.errors").html("")

<% if @task.errors.any? %>
  <% @task.errors.full_messages.each do |message| %>
    $("ul.errors").append($("<li />").html("<%= message.html_safe %>"));
  <% end %>
<% else %>
  $("#new_link").show();
  $(".js-links-block a").removeClass("disabled-link");

  $(".form-section").remove();
  $('<%="#task_#{@task.id}"%>').remove();

  $('.tasks').prepend("<%=j render @task %>");
  $('html, body').animate(
    { scrollTop: $('<%="#task_#{@task.id}"%>').offset().top }, 1000);
<% end %>